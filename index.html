<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8'>
    <link rel="stylesheet" type="text/css" href="lambda.css" media="screen" />
    <script src="lib/jquery-2.0.0.min.js"></script>
    <script src="lib/ast.js"></script>
    <script src="lib/esprima.js"></script>
    <script src="lib/lambda.js"></script>
    <script src="lambda.js"></script>
    <script src="parser/lambda_parser.js"></script>
  </head>
<body>
<p >Write Some js code in here! Do it!</p>
<textarea id='code' >
/* ============================
 *  JavaScript Test Function,
 * ============================
 */

function Test(x,y) { // Change this function and see the output update
  return x;
}

/* ============================
 *  Convert Test JavaScript function to AST representation,
 * ============================
 */
var test_ast = AST.parse(Test);

print("<h3>Print AST Tree</h3>" + JSON.stringify(test_ast)); // Print Test AST tree,
print("<h3>Print Human readable string</h3>" + test_ast.toString());      // Print Human readable string

/* ============================
 *  Get Lambda String
 * ============================
 */
var test_lambda_str = test_ast.toLambda();
print ("<h3>Get Lambda String</h3>" + test_lambda_str);

/* ============================
 *  Parse Lambda String to Lambda Representation,
 *  The {} is used to attach a note to variables and abstractions.
 * ============================
 */

var test_lambda = Lambda.parse(test_lambda_str);
print("<h3>Parse Lambda String to Lambda Representation, (The {Note} attachs a note to Abstraction or Variable)</h3>" + test_lambda);

/* ===========================
 * Print Lambda Tree,
 * ============================
 */
print("<h3>Print Lambda Tree,</h3>" + JSON.stringify(test_lambda));


/* ===========================
 * Change lambda representation,
 * ============================
 */

print("<h3>Lambda.Application,</h3>" + Lambda.Application.toString());
print("<h3>Lambda.Abstraction,</h3>" + Lambda.Abstraction.toString());
print("<h3>Lambda.Variable,</h3>" + Lambda.Variable.toString());

var test_lambda_app = new Lambda.Application(
   new Lambda.Application(test_lambda, new Lambda.Variable ("a")),
   new Lambda.Variable ("b")
);

print("<h3>Change lambda representation,</h3>" + test_lambda_app);

/* ===========================
 * Reduce
 * ============================
 */

// var options = {verbose: true, rec: true};
var options = {};
var step;

step = test_lambda_app.betaReduction(options);
print("<h3>Reduce, Step 1)</h3>" + step.toString());

step = test_lambda_app.betaReduction(options);
print("<h3>Reduce, Step 2)</h3>" +  step.toString());


/* ===========================
 * Lambda Curch Numerals: Succ 
 * ============================
 */
var t = Lambda.parse ("($++.$0.++ (++ 0)) ($n.$f.$x.f (n f x)) ($f.$x.x)");

print("<h3>Lambda Curch Numerals: Succ</h3>" + t);
print("<h3>Reduction</h3>" +t.clone().betaReduction());

</textarea>
<div id='output' ></div>

</body>
</html>
